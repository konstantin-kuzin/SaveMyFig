<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Figma Export GUI</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <!-- <nav class="sidebar">
      <div class="nav-menu">
        <div><a href="#" data-tab="welcome" class="nav-link active">–£—Å—Ç–∞–Ω–æ–≤–∫–∞</a></div>
        <div><a href="#" data-tab="config" class="nav-link">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></div>
        <div><a href="#" data-tab="backup" class="nav-link">–°–∫–∞—á–∏–≤–∞–Ω–∏–µ</a></div>
        <div><a href="#" data-tab="statistics" class="nav-link">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a></div>
        <div><a href="#" data-tab="settings" class="nav-link">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</a></div>
      </div>
    </nav> -->

    <nav class="sidebar">
      <div class="nav-menu">
        <div><a href="#" data-tab="welcome" class="nav-link active">–£—Å—Ç–∞–Ω–æ–≤–∫–∞</a></div>
        <div><a href="#" data-tab="config" class="nav-link">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></div>
        <div><a href="#" data-tab="backup" class="nav-link">–°–∫–∞—á–∏–≤–∞–Ω–∏–µ</a></div>
        <div><a href="#" data-tab="statistics" class="nav-link">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a></div>
      </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content with-fixed-footer">
      <!-- –≠–∫—Ä–∞–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∏ -->
      <div id="welcome-tab" class="tab-content active">
        <div class="tab-header">
          <h2>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2>
          <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</p>
        </div>
        <div class="tab-body">
          <div id="system-check" class="check-section">
            <h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
            <div id="node-status" class="status-item">
              <span class="status-label">Node.js:</span>
              <span class="status-value">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
            <div id="npm-status" class="status-item">
              <span class="status-label">npm:</span>
              <span class="status-value">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
          
          </div><br/>

          <div id="installation-section" class="install-section">
            <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3><br/>
            <button id="install-btn" class="btn btn-primary" disabled>
              –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
            </button>
            <div id="install-progress" class="progress-container hidden">
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
              <div class="progress-text">–£—Å—Ç–∞–Ω–æ–≤–∫–∞...</div>
            </div>
            <div id="install-log" class="log-container hidden">
              <div class="log-content"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
      <div id="config-tab" class="tab-content">
        <div class="tab-body">
          <div id="config-form">
            <!-- FIGMA_ACCESS_TOKEN -->
            <div class="form-section">
              <h2>–ê–∫–∫–∞—É–Ω—Ç Figma</h2>
              <div class="form-group">
                <label for="figma-account-1-email">EMAIL (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ):</label>
                <input type="email" id="figma-account-1-email" name="FIGMA_ACCOUNT_1_EMAIL"
                       placeholder="user@example.com" required>
              </div>
              
              <div class="form-group">
                <label for="figma-account-1-auth-cookie">FIGMA AUTH COOKIE (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ):</label>
                <textarea type="text" id="figma-account-1-auth-cookie" name="FIGMA_ACCOUNT_1_AUTH_COOKIE"
                       placeholder="__Host-figma.authn=..." required rows="2"></textarea>
                       <small class="form-help">
                  <a href="https://github.com/alexchantastic/figma-export/wiki/Getting-your-Figma-auth-session-cookie" target="_blank">
                    –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å cookie
                  </a>
                </small>
              </div>
              <div class="form-group">
                <label for="figma-access-token">FIGMA ACCESS TOKEN (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ):</label>
                <input type="text" id="figma-access-token" name="FIGMA_ACCESS_TOKEN"
                       placeholder="figd_..." required>
                <small class="form-help">
                  <a href="https://help.figma.com/hc/en-us/articles/8085703771159-Manage-personal-access-tokens" target="_blank">
                    –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
                  </a>
                </small>
              </div>
            </div>

            <!-- DOWNLOAD_PATH -->
            <div class="form-section">
              <h2>–ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤</h2>
              <div class="form-group">
                <label for="download-path">DOWNLOAD PATH (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ):</label>
                <div style="display: flex; gap: 8px; flex-direction: row; align-items: center">
                  <input type="text" id="download-path" name="DOWNLOAD_PATH"
                         placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É" readonly required>
                  <button type="button" id="select-path" class="btn btn-secondary">–í—ã–±—Ä–∞—Ç—å</button>
                </div>
              </div>
            </div>

            <!-- PROJECTS –∏ TEAMS -->
            <div class="form-section">
              <h2>–ü—Ä–æ–µ–∫—Ç—ã –∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±–µ–∫–∞–ø–∞</h2>
              <div class="form-group">
                <label for="projects">PROJECTS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –µ—Å–ª–∏ Teams –ø—É—Å—Ç–æ):</label>
                <textarea id="projects" name="PROJECTS" placeholder="12345, 67890, 12345, 67890" rows="2"></textarea>
              </div>
              
              <div class="form-group">
                <label for="teams">TEAMS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –µ—Å–ª–∏ Projects –ø—É—Å—Ç–æ):</label>
                <textarea id="teams" name="TEAMS" placeholder="12345, 67890, 12345, 67890" rows="2"></textarea>
              </div>
            </div>

            <!-- WAIT_TIMEOUT -->
            <div class="form-section">
              <h2>–¢–∞–π–º–∞—É—Ç—ã</h2>
              <div class="form-group">
                <label for="wait-timeout">TIMEOUT (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ):</label>
                <input type="number" id="wait-timeout" name="WAIT_TIMEOUT"
                       value="10000" min="1000" max="60000" required>
                <small class="form-help">–¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è (–º—Å), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10000</small>
              </div>
            </div>
          </div>
        </div>
      <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ—É—Ç–µ—Ä -->
      <div class="fixed-footer">
        <button id="save-config" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      </div>
      </div>
      
      

      <!-- –≠–∫—Ä–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–∞ -->
      <div id="backup-tab" class="tab-content">
        <div class="tab-header">
          <h2>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–∞</h2>
          <p>–ó–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤</p>
        </div>
        <div class="tab-body">
          <div class="backup-controls">
            <div class="form-group">
              <label for="script-command">–ö–æ–º–∞–Ω–¥–∞:</label>
              <select id="script-command" class="form-control">
                <option value="run-backup" selected>npm run run-backup - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª</option>
                <option value="start">npm run start - –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫</option>
                <option value="retry">npm run retry - –ø–æ–≤—Ç–æ—Ä –Ω–µ—É–¥–∞—á–Ω—ã—Ö</option>
                <option value="dry-run">npm run dry-run - –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</option>
              </select>
            </div>

            <div class="backup-buttons">
              <button id="start-backup" class="btn btn-success">‚ñ∂Ô∏è Start</button>
              <button id="stop-backup" class="btn btn-danger" disabled>‚èπÔ∏è Stop</button>
              <button id="clear-log" class="btn btn-secondary">üóëÔ∏è Clear Log</button>
            </div>
          </div>

          <div class="backup-status">
            <div class="status-indicator">
              <span class="status-dot idle"></span>
              <span class="status-text">Idle</span>
            </div>
            <div class="progress-info">
              <span id="progress-text">–ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É</span>
            </div>
          </div>
          
          <div class="log-container">
            <div id="backup-log" class="log-content"></div>
          </div>
        </div>
      </div>

      <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
      <div id="statistics-tab" class="tab-content">
        <div class="tab-body">
          <div class="stats-cards">
            <div class="form-section">
              <div class="stat-info">
                <div class="stat-value" id="total-files">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤</div>
              </div>
            </div>

            <div class="form-section">
              <div class="stat-info">
                <div class="stat-value" id="needing-backup">0</div>
                <div class="stat-label">–¢—Ä–µ–±—É—é—Ç –±—ç–∫–∞–ø–∞</div>
              </div>
            </div>

            <div class="form-section">
              <div class="stat-info">
                <div class="stat-value" id="with-errors">0</div>
                <div class="stat-label">–° –æ—à–∏–±–∫–∞–º–∏</div>
              </div>
            </div>
          </div>
          
          <div class="table-container">
            <table id="backups-table">
              <thead>
                <tr>
                  <th data-sort="project_name">–ü—Ä–æ–µ–∫—Ç</th>
                  <th data-sort="file_name">–ò–º—è —Ñ–∞–π–ª–∞</th>
                  <th data-sort="last_backup_date">–ë–µ–∫–∞–ø</th>
                  <th data-sort="last_modified_date">–ò–∑–º–µ–Ω–µ–Ω –≤ Figma</th>
                  <th data-sort="file_key">–ö–ª—é—á —Ñ–∞–π–ª–∞</th>
                  <!-- <th data-sort="next_attempt_date">–°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞</th> -->
                </tr>
              </thead>
              <tbody id="backups-tbody">
                <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- –≠–∫—Ä–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ -->
      <div id="settings-tab" class="tab-content">
        <div class="tab-header">
          <h2>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
        <div class="tab-body">
          <div class="diagnostic-section">
            <h3>–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="info-grid">
              <div class="info-item">
                <label>Node.js –≤–µ—Ä—Å–∏—è:</label>
                <span id="node-version">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
              </div>
              <div class="info-item">
                <label>Node.js –ø—É—Ç—å:</label>
                <span id="node-path">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
              </div>
              <div class="info-item">
                <label>npm –≤–µ—Ä—Å–∏—è:</label>
                <span id="npm-version">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
              </div>
              <div class="info-item">
                <label>npm –ø—É—Ç—å:</label>
                <span id="npm-path">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
              </div>
              <div class="info-item">
                <label>–í–µ—Ä—Å–∏—è GUI:</label>
                <span id="gui-version">1.0.0</span>
              </div>
              <div class="info-item">
                <label>–í–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞:</label>
                <span id="script-version">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
              </div>
            </div>
          </div>
          
          <div class="diagnostic-section">
            <h3>–°—Ç–∞—Ç—É—Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</h3>
            <div id="deps-status" class="status-list">
              <!-- –°—Ç–∞—Ç—É—Å –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
          </div>

          <div class="diagnostic-section">
            <h3>–î–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ</h3>
            <div id="fs-status" class="status-list">
              <!-- –°—Ç–∞—Ç—É—Å –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
          </div>
          
          <div class="diagnostic-section">
            <h3>–î–æ—Å—Ç—É–ø –∫ Figma API</h3>
            <div id="api-status" class="status-list">
              <!-- –°—Ç–∞—Ç—É—Å –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
          </div>
          
          <div class="diagnostic-section">
            <h3>–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <div class="log-controls">
              <button id="refresh-logs" class="btn btn-secondary">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
              <button id="clear-logs" class="btn btn-warning">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
              <button id="open-logs-folder" class="btn btn-secondary">üìÅ –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É</button>
            </div>
            <div class="log-container">
              <div id="diagnostic-log" class="log-content"></div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script type="module" src="./ui.js"></script>
</body>
</html>